<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Checkout Extension - Test Guide</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1 {
            color: #4a6fa5;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }
        h2 {
            color: #495057;
            margin-top: 30px;
        }
        .step {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .step-number {
            display: inline-block;
            background: #4a6fa5;
            color: white;
            width: 30px;
            height: 30px;
            text-align: center;
            line-height: 30px;
            border-radius: 50%;
            margin-right: 10px;
        }
        code {
            background: #e9ecef;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
        }
        .alert {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        .success {
            background: #d4edda;
            padding: 15px;
            border-left: 4px solid #28a745;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>AI Checkout Extension Test Guide</h1>
    
    <div class="alert">
        <strong>Important:</strong> This guide will help you test the AI Checkout Extension with the new permission settings and tab display features.
    </div>

    <h2>Prerequisites</h2>
    <ol>
        <li>Make sure the Python backend server is running</li>
        <li>Ensure you've reloaded the extension after the latest changes</li>
    </ol>

    <h2>Testing Steps</h2>
    
    <div class="step">
        <h3><span class="step-number">1</span> Verify Server is Running</h3>
        <p>Open PowerShell and run:</p>
        <pre><code>Invoke-WebRequest -Uri http://localhost:5000/health -Method GET</code></pre>
        <p>You should see a response with <code>"status": "healthy"</code></p>
    </div>

    <div class="step">
        <h3><span class="step-number">2</span> Load the Extension</h3>
        <p>In your browser:</p>
        <ol>
            <li>Go to <code>chrome://extensions</code> or <code>edge://extensions</code></li>
            <li>Enable Developer Mode (toggle in top-right)</li>
            <li>Click "Load unpacked" and select the browser-extension folder</li>
            <li>Make sure the extension is enabled</li>
        </ol>
    </div>

    <div class="step">
        <h3><span class="step-number">3</span> Test the Popup</h3>
        <p>Click on the extension icon in your toolbar:</p>
        <ul>
            <li>You should see the current tab name and URL displayed</li>
            <li>The server health status should show "Python backend running"</li>
        </ul>
        <p>If you don't see tab information, check the browser console for errors.</p>
    </div>

    <div class="step">
        <h3><span class="step-number">4</span> Test with Test Page</h3>
        <p>Open the test-extension.html file in your browser:</p>
        <ol>
            <li>Right-click the file and select "Open with" your browser</li>
            <li>Once loaded, you should see the "AI Checkout" button in the bottom right</li>
            <li>Click the new "Test Content Script" button in the debug panel</li>
            <li>You should see a success message if the content script is working</li>
        </ol>
    </div>

    <div class="step">
        <h3><span class="step-number">5</span> Test the Full Automation</h3>
        <p>With test-extension.html open:</p>
        <ol>
            <li>Click on the "AI Checkout" button in the bottom right</li>
            <li>Click "Automate Checkout" in the panel that appears</li>
            <li>The extension should communicate with the Python backend</li>
            <li>Check the developer console (F12) for detailed logs</li>
        </ol>
    </div>

    <div class="success">
        <strong>Troubleshooting:</strong> If you encounter the "Could not establish connection" error:
        <ul>
            <li>Make sure you've reloaded the extension after the permission changes</li>
            <li>Try reopening the browser completely</li>
            <li>Check that the content script is properly loaded by using the Test Content Script button</li>
            <li>Use the extension-tester.html file for more detailed testing</li>
        </ul>
    </div>

    <h2>What Was Fixed</h2>
    <ol>
        <li><strong>Permission Issues:</strong> Added explicit <code>tabs</code> permission and additional host permissions</li>
        <li><strong>UI Enhancements:</strong> Added current tab display in the popup</li>
        <li><strong>Better Error Handling:</strong> Improved detection and reporting of communication issues</li>
        <li><strong>Testing Tools:</strong> Added visual debugging tools and test functions</li>
    </ol>

    <p style="margin-top: 40px; color: #6c757d; font-size: 14px; text-align: center;">
        AI Checkout Extension - Testing Guide - Updated June 5, 2025
    </p>
</body>
</html>
